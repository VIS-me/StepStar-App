<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>StepStar App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="app-container">
        <h1 id="title">StepStar</h1>
        
        <div class="steps-box">
            <span id="steps-count">0</span>
            <p id="steps-label">steps today</p>
        </div>

        <button id="share-btn">...</button>
    </div>

    <script>
        // 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        const tg = window.Telegram.WebApp;
        tg.expand(); // –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
        tg.ready();

        // 2. –û–ø—Ä–µ–¥–µ–ª—è–µ–º —è–∑—ã–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        const userLanguage = tg.initDataUnsafe?.user?.language_code || 'en';
        
        // –ù–∞—Ö–æ–¥–∏–º —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
        const titleElement = document.getElementById('title');
        const labelElement = document.getElementById('steps-label');
        const shareBtn = document.getElementById('share-btn');

        // 3. –°–ª–æ–≤–∞—Ä—å –ø–µ—Ä–µ–≤–æ–¥–æ–≤
        const translations = {
            ru: {
                title: "–®–∞–≥–æ–º–µ—Ä",
                label: "—à–∞–≥–æ–≤ —Å–µ–≥–æ–¥–Ω—è",
                button: "–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç",
                shareText: "–Ø –ø—Ä–æ—à–µ–ª 0 —à–∞–≥–æ–≤ –≤ StepStar! üëü"
            },
            en: {
                title: "StepStar",
                label: "steps today",
                button: "Share result",
                shareText: "I walked 0 steps in StepStar! üëü"
            }
        };

        // –í—ã–±–∏—Ä–∞–µ–º –Ω—É–∂–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ (–µ—Å–ª–∏ –Ω–µ —Ä—É—Å—Å–∫–∏–π, —Ç–æ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π)
        const lang = userLanguage === 'ru' ? 'ru' : 'en';

        // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç—ã
        labelElement.innerText = translations[lang].label;
        shareBtn.innerText = translations[lang].button;
        if(lang === 'ru') titleElement.innerText = translations[lang].title;

        // 4. –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –∫–Ω–æ–ø–∫–∏ "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è"
        shareBtn.addEventListener('click', () => {
            // –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤—ã–±–æ—Ä —á–∞—Ç–∞ –∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç
            tg.switchInlineQuery(translations[lang].shareText, ["users", "groups"]);
        });

        // –°–æ–æ–±—â–∞–µ–º Telegram –æ —Ü–≤–µ—Ç–µ —Å—Ç–∞—Ç—É—Å-–±–∞—Ä–∞ (–ø–æ–¥ —Ü–≤–µ—Ç —Ç–µ–º—ã)
        tg.setHeaderColor('secondary_bg_color');
    </script>
</body>
</html>
