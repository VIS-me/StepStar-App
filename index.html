<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="app" class="app-viewport"></div>

    <div class="tab-bar">
        <div class="tab-item active" onclick="navigate('home')"><i>üè†</i><span>Home</span></div>
        <div class="tab-item" onclick="navigate('rank')"><i>üèÜ</i><span>Rank</span></div>
        <div class="tab-item" onclick="navigate('tour')"><i>üèÅ</i><span>Tour</span></div>
        <div class="tab-item" onclick="navigate('prof')"><i>üë§</i><span>Profile</span></div>
    </div>

    <script src="assets.js"></script>
    <script src="pages.js"></script>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        // –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø–æ—Ç–æ–º –±—É–¥–µ—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –∏–∑ –±–∞–∑—ã)
        let userState = {
            frame: 'blue', // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≥–æ–ª—É–±–∞—è
            steps: 6200
        };

        function navigate(pageId) {
            const app = document.getElementById('app');
            const user = tg.initDataUnsafe?.user || { first_name: "User" };
            
            // –û—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –Ω—É–∂–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–∑ –º–æ–¥—É–ª—è pages.js
            app.innerHTML = Pages[pageId](user, userState);
            
            // –í–∏–∑—É–∞–ª—å–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –º–µ–Ω—é
            document.querySelectorAll('.tab-item').forEach(i => i.classList.remove('active'));
            // (–ª–æ–≥–∏–∫–∞ –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏)
            tg.HapticFeedback.impactOccurred('light');
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫—É–ø–∫–∏/—Å–º–µ–Ω—ã —Ä–∞–º–∫–∏
        function changeFrame(color) {
            userState.frame = color;
            navigate('prof'); // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–æ—Ñ–∏–ª—è
            tg.HapticFeedback.notificationOccurred('success');
        }

        // –°—Ç–∞—Ä—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
        navigate('home');
    </script>
</body>
</html>
