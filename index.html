<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>StepStar</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --tg-bg: #2481cc; 
            --tg-card: rgba(255, 255, 255, 0.15);
            --tg-accent: #ffffff;
            --tg-text: #ffffff;
            --energy-purple: #a855f7;
            --vip-gold: #fbbf24;
            --loss-red: #ff4d4d;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(180deg, #2481cc 0%, #1c66a3 100%);
            color: var(--tg-text);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
            user-select: none;
        }

        .content {
            flex: 1;
            padding: 12px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .glass-panel {
            background: var(--tg-card);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 14px;
        }

        /* --- –ë–õ–û–ö –ü–†–û–§–ò–õ–Ø --- */
        .profile-card { text-align: center; padding: 20px 15px; }
        .avatar-wrap { position: relative; width: 85px; height: 85px; margin: 0 auto 10px; }
        .avatar-img { 
            width: 100%; height: 100%; border-radius: 26px; 
            background: rgba(255,255,255,0.2); border: 2px solid white; 
            display: flex; align-items: center; justify-content: center; font-size: 38px;
            overflow: hidden;
        }
        .vip-tag { 
            position: absolute; bottom: -4px; right: -4px; background: var(--vip-gold); 
            color: #000; padding: 2px 7px; border-radius: 7px; font-size: 11px; font-weight: 800; 
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }

        #user-name {
            font-size: 1.2rem;
            font-weight: 700;
            margin: 0;
            letter-spacing: -0.02em;
        }

        /* --- –í–ù–£–¢–†–ï–ù–ù–ò–ï –ó–ê–ì–û–õ–û–í–ö–ò --- */
        .panel-title { 
            font-size: 11px; 
            font-weight: 600; 
            opacity: 0.6; 
            text-transform: uppercase;
            margin-bottom: 12px; 
            letter-spacing: 0.5px;
        }

        /* --- –û–ë–™–ï–î–ò–ù–ï–ù–ù–´–ô –ë–ê–õ–ê–ù–° --- */
        .balance-content {
            display: flex;
            justify-content: space-around;
            align-items: center;
        }
        .balance-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 19px;
            font-weight: 700;
        }
        .balance-divider {
            width: 1px;
            height: 24px;
            background: rgba(255, 255, 255, 0.2);
        }

        /* --- –°–õ–û–¢–´ --- */
        .slots-row { display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; }
        .slot { 
            aspect-ratio: 1; background: rgba(255,255,255,0.1); border-radius: 14px; 
            border: 1px solid rgba(255,255,255,0.1); display: flex; 
            align-items: center; justify-content: center; font-size: 20px; 
            position: relative;
        }
        .slot.locked { opacity: 0.35; }
        .loss-mark { position: absolute; color: var(--loss-red); font-size: 24px; font-weight: bold; }

        /* --- –ö–ù–û–ü–ö–ò –î–ï–ô–°–¢–í–ò–ô --- */
        .action-row { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; }
        .action-btn { 
            padding: 14px 4px; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            gap: 8px; 
            transition: 0.1s; 
            border-radius: 20px;
        }
        .action-btn:active { transform: scale(0.92); }
        .action-btn i { font-size: 24px; }
        .action-btn span { font-size: 10px; font-weight: 600; text-align: center; }

        /* --- –ù–ê–í–ò–ì–ê–¶–ò–Ø --- */
        .nav-bar {
            height: 70px; background: rgba(28, 102, 163, 0.95);
            display: grid; grid-template-columns: repeat(3, 1fr);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: env(safe-area-inset-bottom);
        }
        .nav-tab { display: flex; flex-direction: column; align-items: center; justify-content: center; color: rgba(255,255,255,0.5); text-decoration: none; font-size: 11px; gap: 4px; }
        .nav-tab.active { color: #ffffff; }
        .nav-tab i { font-size: 22px; }

        /* --- –ü–û–ü–ê–ü --- */
        .overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.6); backdrop-filter: blur(4px); z-index: 999; }
        .dev-popup { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #1c66a3; padding: 25px; border-radius: 24px; z-index: 1000; text-align: center; width: 70%; border: 1px solid rgba(255,255,255,0.3); }
    </style>
</head>
<body>

    <div class="content">
        <div class="glass-panel profile-card">
            <div class="avatar-wrap">
                <div class="avatar-img" id="home-avatar">üëü</div>
                <div class="vip-tag">VIP - <span id="vip-lvl">0</span></div>
            </div>
            <h3 id="user-name">Name</h3>
            <div id="user-rank" style="font-size:13px; opacity:0.8; margin-top: 4px;">–ù–û–í–ò–ß–û–ö</div>
        </div>

        <div class="glass-panel">
            <div class="panel-title" id="txt-balance-head">–ë–∞–ª–∞–Ω—Å:</div>
            <div class="balance-content">
                <div class="balance-item">
                    <span id="bal-stars">0</span> ‚≠êÔ∏è
                </div>
                <div class="balance-divider"></div>
                <div class="balance-item">
                    <span id="bal-energy">50</span> ‚ö°Ô∏è
                </div>
            </div>
        </div>

        <div class="glass-panel">
            <div class="panel-title" id="txt-slots">–î–æ—Å—Ç—É–ø–Ω—ã–µ —á–µ–ª–µ–Ω–¥–∂–∏:</div>
            <div class="slots-row">
                <div class="slot">üëü</div> 
                <div class="slot">üèÜ</div> 
                <div class="slot">
                    <span>üëü</span>
                    <span class="loss-mark">‚úï</span>
                </div>
                <div class="slot locked">üîí</div> 
                <div class="slot locked">üîí</div>
            </div>
        </div>

        <div class="action-row">
            <div class="glass-panel action-btn" onclick="openDev()"><i>‚öîÔ∏è</i><span id="btn-duel">–î—É—ç–ª—å</span></div>
            <div class="glass-panel action-btn" onclick="openDev()"><i>üë•</i><span id="btn-team">–ö–æ–º–∞–Ω–¥–∞</span></div>
            <div class="glass-panel action-btn" onclick="openDev()"><i>üî•</i><span id="btn-mara">–ú–∞—Ä–∞—Ñ–æ–Ω</span></div>
            <div class="glass-panel action-btn" onclick="openDev()"><i>üõí</i><span id="btn-shop">–ú–∞–≥–∞–∑–∏–Ω</span></div>
        </div>
    </div>

    <nav class="nav-bar">
        <div class="nav-tab active" onclick="location.reload()"><i>üè†</i><span id="nav-h">–ì–ª–∞–≤–Ω–∞—è</span></div>
        <div class="nav-tab" onclick="openDev()"><i>üìä</i><span id="nav-c">–ß–µ–ª–µ–Ω–¥–∂–∏</span></div>
        <div class="nav-tab" onclick="openDev()"><i>üë§</i><span id="nav-p">–ü—Ä–æ—Ñ–∏–ª—å</span></div>
    </nav>

    <div class="overlay" id="overlay" onclick="closeDev()"></div>
    <div class="dev-popup" id="dev-popup">
        <h3 id="dev-t">–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</h3>
        <p id="dev-d">–°–∫–æ—Ä–æ –ø–æ—è–≤–∏—Ç—Å—è!</p>
        <button onclick="closeDev()" style="background:#fff; border:none; padding:10px; border-radius:12px; color:#2481cc; font-weight:bold; width:100%;">OK</button>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.backgroundColor = '#2481cc';
        tg.headerColor = '#2481cc';

        const lang = tg.initDataUnsafe.user?.language_code === 'ru' ? 'ru' : 'en';
        const i18n = {
            ru: { rank:"–ù–û–í–ò–ß–û–ö", balance:"–ë–∞–ª–∞–Ω—Å:", slots:"–î–æ—Å—Ç—É–ø–Ω—ã–µ —á–µ–ª–µ–Ω–¥–∂–∏:", duel:"–î—É—ç–ª—å", team:"–ö–æ–º–∞–Ω–¥–∞", mara:"–ú–∞—Ä–∞—Ñ–æ–Ω", shop:"–ú–∞–≥–∞–∑–∏–Ω", h:"–ì–ª–∞–≤–Ω–∞—è", c:"–ß–µ–ª–µ–Ω–¥–∂–∏", p:"–ü—Ä–æ—Ñ–∏–ª—å", t:"–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ", d:"–°–∫–æ—Ä–æ –ø–æ—è–≤–∏—Ç—Å—è!" },
            en: { rank:"BEGINNER", balance:"Balance:", slots:"Available Challenges:", duel:"Duel", team:"Team", mara:"Marathon", shop:"Shop", h:"Home", c:"Challenges", p:"Profile", t:"In Progress", d:"Coming soon!" }
        };

        const t = i18n[lang];
        document.getElementById('user-name').innerText = tg.initDataUnsafe.user?.first_name || "Runner";
        document.getElementById('user-rank').innerText = t.rank;
        document.getElementById('txt-balance-head').innerText = t.balance;
        document.getElementById('txt-slots').innerText = t.slots;
        document.getElementById('btn-duel').innerText = t.duel;
        document.getElementById('btn-team').innerText = t.team;
        document.getElementById('btn-mara').innerText = t.mara;
        document.getElementById('btn-shop').innerText = t.shop;
        document.getElementById('nav-h').innerText = t.h;
        document.getElementById('nav-c').innerText = t.c;
        document.getElementById('nav-p').innerText = t.p;
        document.getElementById('dev-t').innerText = t.t;
        document.getElementById('dev-d').innerText = t.d;

        if(tg.initDataUnsafe.user?.photo_url) {
            document.getElementById('home-avatar').innerHTML = <img src="${tg.initDataUnsafe.user.photo_url}" style="width:100%; height:100%; object-fit:cover;">;
        }

        function openDev() { document.getElementById('overlay').style.display = 'block'; document.getElementById('dev-popup').style.display = 'block'; }
        function closeDev() { document.getElementById('overlay').style.display = 'none'; document.getElementById('dev-popup').style.display = 'none'; }
    </script>
</body>
</html>
